import{_ as L}from"./MemberAvatar.vue_vue_type_script_setup_true_lang-BjiFlRoN.js";import{u as U,_ as D}from"./index-DNt6XNWw.js";import{d as b,o as m,b as y,e as d,f as p,at as F,c as M,w as i,a1 as j,g as s,u as o,i as T,t as E,l as q,F as G,n as H,ad as J}from"./index-BQQ2VPbK.js";import{_ as O,a as P}from"./Grid-DjTplDPr.js";import{_ as Q,a as W}from"./ListItem-CNEYiSL8.js";import{N as X}from"./Icon-BePXEFDU.js";import{_ as Y}from"./Input-BQhyNcfF.js";import{_ as Z}from"./Space-Bh7kPegg.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ne=b({name:"Close",render:function(x,c){return m(),y("svg",ee,c[0]||(c[0]=[d("path",{d:"M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z",fill:"currentColor"},null,-1)]))}}),te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},se=b({name:"Search",render:function(x,c){return m(),y("svg",te,c[0]||(c[0]=[d("path",{d:"M29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29zM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9z",fill:"currentColor"},null,-1)]))}}),oe={class:"flex-1 overflow-y-auto"},le={class:"flex items-center pl-10px h-34px"},ae={class:"flex-1 overflow-y-auto"},ge=b({name:"MemberAssignCard",__name:"MemberAssignCard",props:{modelValue:{type:Array,default(){return[]}}},setup(v,{expose:x}){const c=U(),k=v.modelValue.slice(),a=p([]),r=p([]);(()=>{j(()=>{a.value=k.map(e=>e.userId),r.value=k})})();const S=e=>e.userId,$=(e,n,t)=>{const u=t.action==="check",f=t.row;if(u)r.value.push(f);else{const _=r.value.findIndex(w=>w.userId===f.userId);_>-1&&r.value.splice(_,1)}},B=e=>{const n=r.value.findIndex(u=>e.userId===u.userId),t=a.value.findIndex(u=>e.userId===u);n<0||t<0||(r.value.splice(n,1),a.value.splice(t,1))},R=[{type:"selection"},{key:"member",render(e){return H(L,{avatar:e.avatar,title:e.username,subTitle:e.userId})}}],g=p(!0),C=p([]),I=async(e={username:""})=>{g.value=!0;const{error:n,data:t}=await c.fetchAllMemberTeamList(e);g.value=!1,!n&&(C.value=t)};I();const h=p(""),z=F(e=>{I({username:e})},200);return x({checkedRowsRef:r}),(e,n)=>{const t=X,u=Y,f=D,_=P,w=J,V=Z,A=Q,K=W,N=O;return m(),M(N,{cols:"2","x-gap":10,"item-responsive":"",responsive:"screen",class:"member-assign-card-box h-500px overflow-hidden"},{default:i(()=>[s(_,{span:"1",class:"flex flex-col min-h-0"},{default:i(()=>[s(u,{value:o(h),"onUpdate:value":[n[0]||(n[0]=l=>T(h)?h.value=l:null),o(z)],placeholder:"输入成员名称，模拟远程搜索",clearable:""},{prefix:i(()=>[s(t,{component:o(se)},null,8,["component"])]),_:1},8,["value","onUpdate:value"]),n[2]||(n[2]=d("div",{class:"py-10px"},null,-1)),d("div",oe,[s(f,{"checked-row-keys":o(a),"onUpdate:checkedRowKeys":[n[1]||(n[1]=l=>T(a)?a.value=l:null),$],style:{height:"100%"},"flex-height":"",bordered:!0,"single-line":!1,size:"small",columns:R,data:o(C),loading:o(g),"row-key":S},null,8,["checked-row-keys","data","loading"])])]),_:1}),s(_,{span:"1",class:"flex flex-col min-h-0"},{default:i(()=>[d("div",le,E(o(a).length?`已选择${o(a).length}个成员`:"请选择要添加的成员"),1),n[3]||(n[3]=d("div",{class:"py-10px"},null,-1)),d("div",ae,[s(K,{hoverable:"","show-divider":!1},{default:i(()=>[(m(!0),y(G,null,q(o(r),l=>(m(),M(A,{key:l.userId},{default:i(()=>[s(V,{justify:"space-between",align:"center"},{default:i(()=>[s(L,{size:26,avatar:l.avatar,title:l.username,"sub-title":l.userId},null,8,["avatar","title","sub-title"]),s(w,{text:"",onClick:ce=>B(l)},{default:i(()=>[s(t,{size:"20",component:o(ne)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})}}});export{se as I,ge as _};
