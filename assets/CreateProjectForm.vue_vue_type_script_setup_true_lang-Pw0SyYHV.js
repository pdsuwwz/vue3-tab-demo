import{N as B,u as P}from"./index-DybE-4cO.js";import{_ as S}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-DVrvy5xt.js";import{_ as C}from"./DatePicker-CyQB7ab6.js";import{d as F,b as i,o as s,e as p,f as v,s as q,c,w as t,u as n,n as m,g as r,F as f,l as g,a as O,m as N,t as V,ac as T,ad as E}from"./index-Dr4_a72h.js";import{I as J}from"./TeamOutlined-Bt73YKFM.js";import{_ as W,a as G}from"./FormItem-BfPgMa0X.js";import{_ as b}from"./Input-LioKrBBj.js";import{_ as K,a as Q}from"./ListItem-COPE6ZA1.js";import{_ as X}from"./Grid-DWUDoYbT.js";import{_ as Y}from"./FormItemGridItem-k1JS1HCD.js";import{N as Z}from"./Icon-CNNNq4Jw.js";import{_ as I}from"./Space-BaisQgXY.js";import{_ as ee}from"./Tag-D4Y5K5ek.js";const ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},le=F({name:"BookInformation24Regular",render:function(_,e){return s(),i("svg",ae,e[0]||(e[0]=[p("g",{fill:"none"},[p("path",{d:"M13.25 7a1 1 0 1 1-2 0a1 1 0 0 1 2 0zM11.5 9.75v5a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-1.5 0zM4 4.5A2.5 2.5 0 0 1 6.5 2H18a2.5 2.5 0 0 1 2.5 2.5v14.25a.75.75 0 0 1-.75.75H5.5a1 1 0 0 0 1 1h13.25a.75.75 0 0 1 0 1.5H6.5A2.5 2.5 0 0 1 4 19.5v-15zM19 18V4.5a1 1 0 0 0-1-1H6.5a1 1 0 0 0-1 1V18H19z",fill:"currentColor"})],-1)]))}}),ye=Array.from({length:50}).map((h,_)=>{const e=_+1;return{id:`${e}`,project_code:`ACBD${e}`,projectName:`项目${e}`,status:"进行中",create_time:"2023-06-14 12:00",create_by:"李华"}}),te=[{value:"北京总部",label:"北京总部"},{value:"上海分部",label:"上海分部"},{value:"广州分部",label:"广州分部"},{value:"深圳分部",label:"深圳分部"},{value:"成都分部",label:"成都分部"},{value:"西安分部",label:"西安分部"},{value:"天津分部",label:"天津分部"},{value:"青岛分部",label:"青岛分部"},{value:"杭州分部",label:"杭州分部"},{value:"重庆分部",label:"重庆分部"}],ne=[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"}],oe={class:"flex items-center"},re={class:"flex items-center"},je=F({name:"CreateProjectForm",__name:"CreateProjectForm",setup(h,{expose:_}){const e=v({projectName:"",projectBranch:null,projectLevel:null,projectDesc:"",startDate:null,endDate:null,memberList:{teamMember:[],teamLeader:[],projectManager:[],qualityManager:[],reviewManager:[]}}),L=q([{path:"projectBranch",label:"项目分部",rule:{message:"请选择"},render:()=>m(B,{placeholder:"请选择所属分部",options:te,value:e.value.projectBranch,onUpdateValue(a){e.value.projectBranch=a}})},{path:"projectLevel",label:"项目等级",rule:{message:"请选择"},render:()=>m(B,{placeholder:"请选择项目等级",options:ne,value:e.value.projectLevel,onUpdateValue(a){e.value.projectLevel=a}})},{path:"startDate",label:"开始日期",rule:{message:"请选择"},render:()=>m(C,{placeholder:"请选择项目开始日期",valueFormat:"yyyy.MM.dd",type:"date",formattedValue:e.value.startDate,onUpdateFormattedValue(a){e.value.startDate=a}})},{path:"endDate",label:"结束日期",rule:{message:"请选择"},render:()=>m(C,{placeholder:"请选择项目结束日期",valueFormat:"yyyy.MM.dd",type:"date",formattedValue:e.value.endDate,isDateDisabled(a){return e.value.startDate?a<Date.parse(e.value.startDate):!1},onUpdateFormattedValue(a){e.value.endDate=a}})},{path:"projectDesc",label:"项目概括",span:"xs:2 s:2 m:2",render:()=>m(b,{placeholder:"请简要描述一下项目基本情况",type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:"200",showCount:!0,value:e.value.projectDesc,onUpdateValue(a){e.value.projectDesc=a}})}]),x=v(),$=a=>{const o=E(e.value.memberList[a.value]);window.$ModalDialog.create({title:"选择成员",style:{maxWidth:"650px",width:"70%"},maskClosable:!1,closeOnEsc:!1,content:()=>m(S,{ref:x,modelValue:o}),positiveText:"确定",async onPositiveClick(){e.value.memberList[a.value]=x.value.checkedRowsRef}})},y=v();return _({validateRules:async()=>new Promise(a=>{y.value.validate(o=>{a(!o)})})}),(a,o)=>{const j=Z,w=G,R=Y,U=X,D=Q,M=K,z=ee,A=T,k=I,H=W;return s(),c(H,{ref_key:"refForm",ref:y,model:n(e),"label-placement":"top","label-width":"auto",class:"max-h-600px overflow-y-auto"},{default:t(()=>[r(M,null,{header:t(()=>[p("div",oe,[r(j,{class:"mr-10px",size:"18",component:n(le)},null,8,["component"]),o[1]||(o[1]=p("span",{class:"text-16px font-700"},"基本信息",-1))])]),default:t(()=>[r(D,null,{default:t(()=>[r(w,{path:"projectName",label:"项目名称",rule:a.getRequiredRules({trigger:"change",message:"请输入项目名称"})},{default:t(()=>[r(n(b),{value:n(e).projectName,"onUpdate:value":o[0]||(o[0]=l=>n(e).projectName=l),maxlength:"100","show-count":"",placeholder:"请输入项目名称"},null,8,["value"])]),_:1},8,["rule"]),r(U,{"x-gap":20,cols:"2","item-responsive":"",responsive:"screen"},{default:t(()=>[(s(!0),i(f,null,g(n(L),(l,d)=>(s(),c(R,{key:d,path:l.path,label:l.label,span:l.span||"xs:2 s:2 m:1",rule:a.getRequiredRules({trigger:"change",...l.rule})},{default:t(()=>[l.render?(s(),c(O(l.render),{key:0,value:n(e)[l.path],"onUpdate:value":u=>n(e)[l.path]=u,class:"flex-1"},null,40,["value","onUpdate:value"])):(s(),c(n(b),{key:1,value:n(e)[l.path],"onUpdate:value":u=>n(e)[l.path]=u},null,8,["value","onUpdate:value"]))]),_:2},1032,["path","label","span","rule"]))),128))]),_:1})]),_:1})]),_:1}),r(M,null,{header:t(()=>[p("div",re,[r(j,{class:"mr-10px",size:"18",component:n(J)},null,8,["component"]),o[2]||(o[2]=p("span",{class:"text-16px font-700"},"成员分配",-1))])]),default:t(()=>[r(D,null,{default:t(()=>[r(k,{vertical:""},{default:t(()=>[(s(!0),i(f,null,g(n(P),(l,d)=>(s(),c(w,{key:d,"label-placement":"left",label:l.label+":"},{default:t(()=>[r(k,null,{default:t(()=>[(s(!0),i(f,null,g(n(e).memberList[l.value],u=>(s(),c(z,{key:u.userId,closable:""},{default:t(()=>[N(V(u.username),1)]),_:2},1024))),128)),r(A,{size:"small",type:"primary",dashed:"",onClick:u=>$(l)},{default:t(()=>o[3]||(o[3]=[N(" 添加 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1}),p("pre",null,V(JSON.stringify(n(e),null,2)),1)]),_:1},8,["model"])}}});export{je as _,ye as m};
