import{_ as B}from"./LayoutPage.vue_vue_type_script_setup_true_lang-BezqNmp3.js";import{d as i,o as m,b as f,e as r,f as x,ac as S,k as V,c as A,w as p,h as D,g as _,u as l,ad as g,m as H,i as U,a1 as E,n,_ as K,as as j}from"./index-BQQ2VPbK.js";import{e as q,g as O,h as F}from"./index-5J7C7gNL.js";import{u as G}from"./useTabRouter-D_wdIkvi.js";import{u as J,_ as Q}from"./index-DNt6XNWw.js";import{_ as v}from"./Tag-DSt282iC.js";import{N as W}from"./Icon-BePXEFDU.js";import{N as X}from"./Dropdown-Ajl9EpEv.js";import"./utils-DuVwWGRS.js";import"./FocusDetector-ugadypO-.js";import"./Follower-BII3ZYJ5.js";import"./next-frame-once-C5Ksf8W7.js";import"./create-DeO8t-sD.js";import"./Eye-Bo3C4vt5.js";import"./use-compitable-B-9Wj_ZY.js";import"./Input-BQhyNcfF.js";import"./index-D1YRNDTb.js";import"./Popover-DkcwTP-L.js";import"./get-D1TFL870.js";import"./get-slot-Bk_rJcZu.js";import"./member-avatar-CR9m-KS_.js";import"./store-DR4Batca.js";import"./Tooltip-BDS6GQMR.js";import"./Forward--dHqveyb.js";const Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Z=i({name:"MoreVertical20Regular",render:function(o,a){return m(),f("svg",Y,a[0]||(a[0]=[r("g",{fill:"none"},[r("path",{d:"M10 6a1.25 1.25 0 1 1 0-2.5A1.25 1.25 0 0 1 10 6zm0 5.25a1.25 1.25 0 1 1 0-2.5a1.25 1.25 0 0 1 0 2.5zm-1.25 4a1.25 1.25 0 1 0 2.5 0a1.25 1.25 0 0 0-2.5 0z",fill:"currentColor"})],-1)]))}}),ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},te=i({name:"NotepadPerson24Regular",render:function(o,a){return m(),f("svg",ee,a[0]||(a[0]=[r("g",{fill:"none"},[r("path",{d:"M5.753 22.005a2.25 2.25 0 0 1-2.25-2.25L3.502 5.75a2.25 2.25 0 0 1 2.25-2.25l.747-.001V2.75a.75.75 0 0 1 .649-.743L7.25 2a.75.75 0 0 1 .743.648L8 2.75l-.001.749H11V2.75a.75.75 0 0 1 .649-.743L11.75 2a.75.75 0 0 1 .744.648l.007.102l-.001.749h2.998V2.75a.75.75 0 0 1 .649-.743L16.25 2a.75.75 0 0 1 .743.648L17 2.75l-.001.749h.75a2.25 2.25 0 0 1 2.25 2.25v5.587A3.485 3.485 0 0 0 18.5 11h-.001V5.75a.75.75 0 0 0-.751-.75H5.742a.75.75 0 0 0-.74.75l.001 14.004c0 .415.336.75.75.75h7.3c.088.526.29 1.038.615 1.5H5.753zM7.25 16h3.998a.75.75 0 0 1 .102 1.493l-.102.007H7.25a.75.75 0 0 1-.102-1.493L7.25 16zm0-8h8.998a.75.75 0 0 1 .102 1.493l-.102.007H7.25a.75.75 0 0 1-.102-1.493L7.25 8zm11.25 9a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5zm0 6c3.214 0 4.5-1.569 4.5-3.125v-.103c0-.979-.794-1.772-1.773-1.772h-5.454c-.98 0-1.773.793-1.773 1.772v.103C14 21.437 15.286 23 18.5 23zM7.25 12a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5h-6z",fill:"currentColor"})],-1)]))}}),ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},ne=i({name:"PersonDelete16Regular",render:function(o,a){return m(),f("svg",ae,a[0]||(a[0]=[r("g",{fill:"none"},[r("path",{d:"M9.5 9a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4c-3.14 0-5-2.029-5-4v-.5A1.5 1.5 0 0 1 2.5 9h7zm0 1h-7a.5.5 0 0 0-.5.5v.5c0 1.438 1.432 3 4 3s4-1.562 4-3v-.5a.5.5 0 0 0-.5-.5zM6 2.5A2.75 2.75 0 1 1 6 8a2.75 2.75 0 0 1 0-5.5zm0 1A1.75 1.75 0 1 0 6 7a1.75 1.75 0 0 0 0-3.5zm4.784-2.411l.07.057L12.5 2.793l1.646-1.647a.5.5 0 0 1 .708.708L13.207 3.5l1.647 1.646a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L12.5 4.207l-1.646 1.647a.5.5 0 0 1-.708-.708L11.793 3.5l-1.647-1.646a.5.5 0 0 1-.057-.638l.057-.07a.5.5 0 0 1 .562-.1l.076.043z",fill:"currentColor"})],-1)]))}}),re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},oe=i({name:"PersonEdit24Regular",render:function(o,a){return m(),f("svg",re,a[0]||(a[0]=[r("g",{fill:"none"},[r("path",{d:"M14.855 15.5l1.5-1.5H6.253a2.249 2.249 0 0 0-2.25 2.25v.577c0 .892.32 1.756.9 2.435c1.395 1.634 3.442 2.531 6.097 2.707c-.004-.183.016-.37.064-.561l.23-.924c-2.373-.12-4.108-.858-5.251-2.196a2.25 2.25 0 0 1-.54-1.461v-.578c0-.413.336-.749.75-.749h8.602zM12 2.005a5 5 0 1 1 0 10a5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7zm7.1 9.165l-5.903 5.902a2.686 2.686 0 0 0-.706 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902A2.286 2.286 0 0 0 19.1 12.67z",fill:"currentColor"})],-1)]))}}),Ne=i({name:"MemberTeamIndex",__name:"index",setup(c){const o=D(),a=G(),y=J(),b=o.params.projectId,z=e=>e.userId,u=x([]),w=x([]),I=(e,t)=>{w.value=t},R=()=>{if(!w.value.length){window.$ModalMessage.warning("请至少勾选一条表格数据");return}const e=w.value.map(t=>({to:{name:"MemberTeamPreview",params:{datasetId:t.userId}},tabName:`成员查看-${t.username}`}));a.pushMultiple(b,e),E(()=>{u.value=[]})},d=S({page:1,pageSize:30,showSizePicker:!0,pageSizes:[10,20,30],onChange:e=>{d.page=e},onUpdatePageSize:e=>{d.pageSize=e,d.page=1}}),s=(e,t="")=>()=>n(W,{class:t},{default:()=>n(e)}),h=e=>{a.push({name:"MemberTeamPreview",params:{datasetId:e.userId}},`成员查看-${e.username}`)},L=e=>n(X,{options:[{label:"查看",key:"preview",icon:s(te),props:{onClick:()=>{h(e)}}},{label:"编辑",key:"edit",icon:s(oe),props:{onClick:()=>{a.push({name:"MemberTeamEdit",params:{datasetId:e.userId}},`成员编辑-${e.username}`)}}},{label:"删除",key:"remove",icon:s(ne),disabled:e.memberStatus===1,props:{onClick:()=>{if(e.memberStatus===1)return;const t=window.$ModalDialog.warning({title:"警告",content:`确定删除该成员: " ${e.username} "?`,positiveText:"删除",negativeText:"我再想想",onPositiveClick:async()=>{t.loading=!0,await j(400),window.$ModalMessage.success(`假删除成功: ${e.username}`)}})}}}]},{default:()=>n(g,{quaternary:!0,round:!0,size:"tiny"},s(Z,"cursor-pointer"))}),C=[{type:"selection",fixed:"left"},{title:"成员名称",key:"username",width:100,align:"center",fixed:"left",render(e){return n(g,{text:!0,type:"primary",onClick(){h(e)}},{default:()=>e.username})}},{title:"工号",key:"userId",align:"center",width:100,render(e){return n(g,{text:!0,type:"primary",onClick(){h(e)}},{default:()=>e.userId})}},{title:"项目角色",key:"roleId",align:"center",width:160,render(e){const t=q(e.roleId);return n(v,{bordered:!1},{default:()=>t.label})}},{title:"职级",key:"rank",align:"center",render(e){const t=O(e.rank);return n(v,{type:t.type},{default:()=>t.label})}},{title:"邮箱",key:"email",align:"center"},{title:"成员状态",key:"status",align:"center",width:200,fixed:"right",render(e){const t=F(e.memberStatus);return n(v,{bordered:!1,round:!0,type:t.type},{icon:s(t.icon),default:()=>t.label})}},{title:"操作列",key:"actions",align:"center",width:80,fixed:"right",render(e){return L(e)}}],k=x(!0);(async()=>{k.value=!0,await y.fetchMemberTeamList({projectId:b}),k.value=!1})();const T=V(()=>y.memberTeamList);return(e,t)=>{const N=Q,P=K,$=B;return m(),A($,null,{default:p(()=>[_(P,{bordered:!1,title:"成员管理-团队成员列表",class:"h-full"},{"header-extra":p(()=>[_(l(g),{type:"primary",onClick:t[0]||(t[0]=M=>R())},{default:p(()=>t[2]||(t[2]=[H(" 打开 ")])),_:1})]),default:p(()=>[_(N,{"checked-row-keys":l(u),"onUpdate:checkedRowKeys":[t[1]||(t[1]=M=>U(u)?u.value=M:null),I],class:"h-full",columns:C,data:l(T),pagination:l(d),"scroll-x":1100,bordered:!1,"single-line":!1,"flex-height":"",striped:"","row-key":z,loading:l(k)},null,8,["checked-row-keys","data","pagination","loading"])]),_:1})]),_:1})}}});export{Ne as default};
