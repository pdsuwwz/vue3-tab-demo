import{_ as N}from"./LayoutSection-CTV24orR.js";import{_ as S}from"./index-CYt4aHqy.js";import{m as P,_ as B}from"./CreateProjectForm.vue_vue_type_script_setup_true_lang-B8U38Smy.js";import{d as w,o as v,b as k,e as p,bf as T,bg as V,as as g,f as I,g as m,k as z,c as D,w as a,i as s,h as r,j as E,m as F,ad as h,n as f}from"./index-CtRoxKcD.js";import{I as M}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-Dd1zG2UP.js";import{N as A}from"./Icon-CZCHQa0Y.js";import{_ as G}from"./Input-DhBcnkef.js";import{_ as U}from"./index-U71UPzdk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Space-B63-XnZ7.js";import"./get-slot-Bk_rJcZu.js";import"./Octocat-DLhAeVAN.js";import"./index-EAIJ469P.js";import"./utils-DqaeK2Q3.js";import"./FocusDetector-CYDR0EJ2.js";import"./Follower-DSN2uT3h.js";import"./next-frame-once-C5Ksf8W7.js";import"./create-D3Vn69pI.js";import"./Eye-pfEr8nuG.js";import"./use-compitable-Coj2-vxD.js";import"./Tag-Ds09VAxj.js";import"./index-DVsssTzF.js";import"./Popover-C9fkT9TY.js";import"./get-BRgBQCMF.js";import"./member-avatar-DVoK-9KR.js";import"./DatePicker-DF0TSXzr.js";import"./Dropdown-C04fMNfG.js";import"./Forward-C1UmPCrl.js";import"./TeamOutlined-Czw_7Mvq.js";import"./FormItem-CvJdtYB-.js";import"./FormItemGridItem-CAZZTh6k.js";import"./Grid-Diyv5zQE.js";import"./ListItem-kmRYTX1M.js";import"./MemberAvatar.vue_vue_type_script_setup_true_lang-D1-WwiK_.js";import"./Avatar-B6k4W3tL.js";import"./Tooltip-wADHHuVt.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},W=p("path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z",fill:"currentColor"},null,-1),q=[W],J=w({name:"Add",render:function(e,c){return v(),k("svg",O,q)}}),K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=p("path",{d:"M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1l111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6c8.2 0 16.3-2.1 23.6-6.2c12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6L48 288L464 48l-59.4 387.3z",fill:"currentColor"},null,-1),X=[Q],Y=w({name:"PaperPlaneRegular",render:function(e,c){return v(),k("svg",K,X)}});function Z(t){return T({url:"/project",method:"post",data:t})}const tt=V("HomeFront",{state:()=>({homeProjectList:[]}),getters:{},actions:{async createProject(t){await g(200);const e=await Z(t);return this.filterResponse(e)},async fetchHomeProjectList(){await g(320);const t={msg:"ok",error:0,data:P};return this.filterResponse(t,({data:e})=>{this.homeProjectList=e})},fetchSearchHomeProjectList(t=""){const e={msg:"ok",error:0,data:P};return this.filterResponse(e,({data:c})=>{this.homeProjectList=c.filter(l=>{const{projectName:u}=l;return t.includes(u)||u.includes(t)})})}},debounce:{fetchSearchHomeProjectList:400}}),et=p("h3",null,"项目列表",-1),ot={class:"w-320px"},Ft=w({name:"GroupProjectList",__name:"index",setup(t){const e=tt(),c=I(),l=o=>{c.push({name:"GroupProjectDetail",params:{projectId:o.id}})};m([]);const L=[{title:"项目代码",key:"project_code",align:"center"},{title:"项目名称",key:"projectName",align:"center",render(o){return f(h,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(o)},{default:()=>o.projectName})}},{title:"状态",key:"status",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"创建人",key:"create_by",align:"center"},{title:"操作",key:"action",align:"center",render(o){return f(h,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(o)},{default:()=>"查看"})}}],d=m(!0);(async()=>{d.value=!0,await e.fetchHomeProjectList(),d.value=!1})();const _=m(""),y=z(()=>e.homeProjectList),C=e.fetchSearchHomeProjectList,b=()=>{const o="新建",i=m(),n=window.$ModalDialog.create({title:"新建项目",style:{maxWidth:"900px",width:"80%"},maskClosable:!1,closeOnEsc:!1,content:()=>f(B,{ref:i}),positiveText:o,async onPositiveClick(){return await i.value.validateRules()?(n.loading=!0,n.positiveText="提交中..",await g(1e3),n.positiveText=o,n.loading=!1,Promise.reject(new Error("提交失败"))):Promise.reject(new Error("请填写完整"))}})};return(o,i)=>{const n=A,x=G,H=U,R=S,$=N;return v(),D($,{"flex-content":""},{title:a(()=>[s(n,{size:22,class:"flex items-center"},{default:a(()=>[s(r(Y))]),_:1}),et]),action:a(()=>[p("div",ot,[s(x,{value:r(_),"onUpdate:value":[i[0]||(i[0]=j=>E(_)?_.value=j:null),r(C)],placeholder:"请输入项目名称搜索",clearable:""},{prefix:a(()=>[s(n,{component:r(M)},null,8,["component"])]),_:1},8,["value","onUpdate:value"])]),s(r(h),{type:"primary",onClick:i[1]||(i[1]=j=>b())},{icon:a(()=>[s(n,{component:r(J)},null,8,["component"])]),default:a(()=>[F(" 添加项目 ")]),_:1})]),default:a(()=>[s(H,{columns:r(L),data:r(y),style:{height:"100%"},striped:"","flex-height":"",loading:r(d),bordered:!1},null,8,["columns","data","loading"]),s(R,{"show-border":""})]),_:1})}}});export{Ft as default};
