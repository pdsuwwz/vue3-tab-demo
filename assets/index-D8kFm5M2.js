import{_ as S}from"./LayoutSection-DEI3NgbR.js";import{_ as $}from"./index-Bwz_CMMx.js";import{m as P,_ as B}from"./CreateProjectForm.vue_vue_type_script_setup_true_lang-D1oNGcrp.js";import{d as w,o as v,b as k,e as p,bf as T,bg as V,as as g,f as I,g as m,k as z,c as D,w as a,i,h as n,j as E,m as F,ad as f,n as h}from"./index-iLhBIVOw.js";import{I as M}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-Dt9KulNQ.js";import{N as A}from"./Icon-DlsP5A4N.js";import{_ as G}from"./Input-Bi7uzRAE.js";import{_ as U}from"./index-DuoXEI0P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Space-Dkx8_PhH.js";import"./get-slot-Bk_rJcZu.js";import"./Octocat-n4WG9Iqm.js";import"./index-HmpeRXcH.js";import"./utils-Mq1QGnKK.js";import"./FocusDetector-ChvZQsHB.js";import"./Follower-DmqAUPUl.js";import"./next-frame-once-C5Ksf8W7.js";import"./create-D3Vn69pI.js";import"./Eye-OV34aUMF.js";import"./use-compitable-CFYfcTmt.js";import"./Tag-nNZpo7qr.js";import"./index-CKdlN9aj.js";import"./Popover-__wcGXrd.js";import"./get-CDakolNs.js";import"./member-avatar-CR9m-KS_.js";import"./DatePicker-BLzlNsqA.js";import"./Dropdown-Dv8o8fh0.js";import"./Forward-Cna1DA-R.js";import"./TeamOutlined-Bgf5mIw7.js";import"./FormItem-_yTYjAJo.js";import"./FormItemGridItem-C0cJH2yB.js";import"./Grid-CGc4nnwZ.js";import"./ListItem-D6_c7LGZ.js";import"./MemberAvatar.vue_vue_type_script_setup_true_lang-DLeSjySZ.js";import"./Avatar-B-EunX_9.js";import"./Tooltip-wB082nTj.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},W=p("path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z",fill:"currentColor"},null,-1),q=[W],J=w({name:"Add",render:function(e,c){return v(),k("svg",O,q)}}),K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=p("path",{d:"M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1l111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6c8.2 0 16.3-2.1 23.6-6.2c12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6L48 288L464 48l-59.4 387.3z",fill:"currentColor"},null,-1),X=[Q],Y=w({name:"PaperPlaneRegular",render:function(e,c){return v(),k("svg",K,X)}});function Z(t){return T({url:"/project",method:"post",data:t})}const tt=V("HomeFront",{state:()=>({homeProjectList:[]}),getters:{},actions:{async createProject(t){await g(200);const e=await Z(t);return this.filterResponse(e)},async fetchHomeProjectList(){await g(320);const t={msg:"ok",error:0,data:P};return this.filterResponse(t,({data:e})=>{this.homeProjectList=e})},fetchSearchHomeProjectList(t=""){const e={msg:"ok",error:0,data:P};return this.filterResponse(e,({data:c})=>{this.homeProjectList=c.filter(l=>{const{projectName:u}=l;return t.includes(u)||u.includes(t)})})}},debounce:{fetchSearchHomeProjectList:400}}),et={class:"w-320px"},Et=w({name:"GroupProjectList",__name:"index",setup(t){const e=tt(),c=I(),l=r=>{c.push({name:"GroupProjectDetail",params:{projectId:r.id}})};m([]);const L=[{title:"项目代码",key:"project_code",align:"center"},{title:"项目名称",key:"projectName",align:"center",render(r){return h(f,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(r)},{default:()=>r.projectName})}},{title:"状态",key:"status",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"创建人",key:"create_by",align:"center"},{title:"操作",key:"action",align:"center",render(r){return h(f,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(r)},{default:()=>"查看"})}}],d=m(!0);(async()=>{d.value=!0,await e.fetchHomeProjectList(),d.value=!1})();const _=m(""),y=z(()=>e.homeProjectList),C=e.fetchSearchHomeProjectList,b=()=>{const r="新建",o=m(),s=window.$ModalDialog.create({title:"新建项目",style:{maxWidth:"900px",width:"80%"},maskClosable:!1,closeOnEsc:!1,content:()=>h(B,{ref:o}),positiveText:r,async onPositiveClick(){return await o.value.validateRules()?(s.loading=!0,s.positiveText="提交中..",await g(1e3),s.positiveText=r,s.loading=!1,Promise.reject(new Error("提交失败"))):Promise.reject(new Error("请填写完整"))}})};return(r,o)=>{const s=A,x=G,H=U,R=$,N=S;return v(),D(N,{"flex-content":""},{title:a(()=>[i(s,{size:22,class:"flex items-center"},{default:a(()=>[i(n(Y))]),_:1}),o[2]||(o[2]=p("h3",null,"项目列表",-1))]),action:a(()=>[p("div",et,[i(x,{value:n(_),"onUpdate:value":[o[0]||(o[0]=j=>E(_)?_.value=j:null),n(C)],placeholder:"请输入项目名称搜索",clearable:""},{prefix:a(()=>[i(s,{component:n(M)},null,8,["component"])]),_:1},8,["value","onUpdate:value"])]),i(n(f),{type:"primary",onClick:o[1]||(o[1]=j=>b())},{icon:a(()=>[i(s,{component:n(J)},null,8,["component"])]),default:a(()=>[o[3]||(o[3]=F(" 添加项目 "))]),_:1})]),default:a(()=>[i(H,{columns:n(L),data:n(y),style:{height:"100%"},striped:"","flex-height":"",loading:n(d),bordered:!1},null,8,["columns","data","loading"]),i(R,{"show-border":""})]),_:1})}}});export{Et as default};
