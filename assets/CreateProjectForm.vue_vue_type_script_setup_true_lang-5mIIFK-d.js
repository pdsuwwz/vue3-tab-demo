import{N as B,u as P}from"./index-BuPzJq4u.js";import{_ as S}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-DP4s869H.js";import{_ as C}from"./DatePicker-xsNhn-Hk.js";import{d as $,o as r,b as i,e as u,g as v,s as q,p,c as _,w as l,i as o,h as n,l as h,a as O,F as f,m as N,t as V,ae as T,N as E,af as J,ag as W}from"./index-Ds_VeN3u.js";import{I as G}from"./TeamOutlined-tM29LH31.js";import{_ as g}from"./Input-C5DUFFCo.js";import{_ as K,a as Q}from"./FormItem-52VOMM2w.js";import{_ as X}from"./FormItemGridItem-DNvIrTfn.js";import{a as Y}from"./Grid--PcdEgiF.js";import{_ as Z,a as I}from"./ListItem-DhEs9LQc.js";import{_ as ee}from"./Tag-lEhzykZz.js";const ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},te=u("g",{fill:"none"},[u("path",{d:"M13.25 7a1 1 0 1 1-2 0a1 1 0 0 1 2 0zM11.5 9.75v5a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-1.5 0zM4 4.5A2.5 2.5 0 0 1 6.5 2H18a2.5 2.5 0 0 1 2.5 2.5v14.25a.75.75 0 0 1-.75.75H5.5a1 1 0 0 0 1 1h13.25a.75.75 0 0 1 0 1.5H6.5A2.5 2.5 0 0 1 4 19.5v-15zM19 18V4.5a1 1 0 0 0-1-1H6.5a1 1 0 0 0-1 1V18H19z",fill:"currentColor"})],-1),le=[te],ne=$({name:"BookInformation24Regular",render:function(m,e){return r(),i("svg",ae,le)}}),we=Array.from({length:50}).map((b,m)=>{const e=m+1;return{id:`${e}`,project_code:`ACBD${e}`,projectName:`项目${e}`,status:"进行中",create_time:"2023-06-14 12:00",create_by:"李华"}}),oe=[{value:"北京总部",label:"北京总部"},{value:"上海分部",label:"上海分部"},{value:"广州分部",label:"广州分部"},{value:"深圳分部",label:"深圳分部"},{value:"成都分部",label:"成都分部"},{value:"西安分部",label:"西安分部"},{value:"天津分部",label:"天津分部"},{value:"青岛分部",label:"青岛分部"},{value:"杭州分部",label:"杭州分部"},{value:"重庆分部",label:"重庆分部"}],re=[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"}],se={class:"flex items-center"},ue=u("span",{class:"text-16px font-700"},"基本信息",-1),ce={class:"flex items-center"},pe=u("span",{class:"text-16px font-700"},"成员分配",-1),De=$({name:"CreateProjectForm",__name:"CreateProjectForm",setup(b,{expose:m}){const e=v({projectName:"",projectBranch:null,projectLevel:null,projectDesc:"",startDate:null,endDate:null,memberList:{teamMember:[],teamLeader:[],projectManager:[],qualityManager:[],reviewManager:[]}}),F=q([{path:"projectBranch",label:"项目分部",rule:{message:"请选择"},render:()=>p(B,{placeholder:"请选择所属分部",options:oe,value:e.value.projectBranch,onUpdateValue(a){e.value.projectBranch=a}})},{path:"projectLevel",label:"项目等级",rule:{message:"请选择"},render:()=>p(B,{placeholder:"请选择项目等级",options:re,value:e.value.projectLevel,onUpdateValue(a){e.value.projectLevel=a}})},{path:"startDate",label:"开始日期",rule:{message:"请选择"},render:()=>p(C,{placeholder:"请选择项目开始日期",valueFormat:"yyyy.MM.dd",type:"date",formattedValue:e.value.startDate,onUpdateFormattedValue(a){e.value.startDate=a}})},{path:"endDate",label:"结束日期",rule:{message:"请选择"},render:()=>p(C,{placeholder:"请选择项目结束日期",valueFormat:"yyyy.MM.dd",type:"date",formattedValue:e.value.endDate,isDateDisabled(a){return e.value.startDate?a<Date.parse(e.value.startDate):!1},onUpdateFormattedValue(a){e.value.endDate=a}})},{path:"projectDesc",label:"项目概括",span:"xs:2 s:2 m:2",render:()=>p(g,{placeholder:"请简要描述一下项目基本情况",type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:"200",showCount:!0,value:e.value.projectDesc,onUpdateValue(a){e.value.projectDesc=a}})}]),x=v(),L=a=>{const c=T(e.value.memberList[a.value]);window.$ModalDialog.create({title:"选择成员",style:{maxWidth:"650px",width:"70%"},maskClosable:!1,closeOnEsc:!1,content:()=>p(S,{ref:x,modelValue:c}),positiveText:"确定",async onPositiveClick(){e.value.memberList[a.value]=x.value.checkedRowsRef}})},y=v();return m({validateRules:async()=>new Promise(a=>{y.value.validate(c=>{a(!c)})})}),(a,c)=>{const j=E,w=K,R=X,U=Y,D=Z,M=I,z=ee,A=J,k=W,H=Q;return r(),_(H,{ref_key:"refForm",ref:y,model:n(e),"label-placement":"top","label-width":"auto",class:"max-h-600px overflow-y-auto"},{default:l(()=>[o(M,null,{header:l(()=>[u("div",se,[o(j,{class:"mr-10px",size:"18",component:n(ne)},null,8,["component"]),ue])]),default:l(()=>[o(D,null,{default:l(()=>[o(w,{path:"projectName",label:"项目名称",rule:a.getRequiredRules({trigger:"change",message:"请输入项目名称"})},{default:l(()=>[o(n(g),{value:n(e).projectName,"onUpdate:value":c[0]||(c[0]=t=>n(e).projectName=t),maxlength:"100","show-count":"",placeholder:"请输入项目名称"},null,8,["value"])]),_:1},8,["rule"]),o(U,{"x-gap":20,cols:"2","item-responsive":"",responsive:"screen"},{default:l(()=>[(r(!0),i(f,null,h(n(F),(t,d)=>(r(),_(R,{key:d,path:t.path,label:t.label,span:t.span||"xs:2 s:2 m:1",rule:a.getRequiredRules({trigger:"change",...t.rule})},{default:l(()=>[t.render?(r(),_(O(t.render),{key:0,value:n(e)[t.path],"onUpdate:value":s=>n(e)[t.path]=s,class:"flex-1"},null,40,["value","onUpdate:value"])):(r(),_(n(g),{key:1,value:n(e)[t.path],"onUpdate:value":s=>n(e)[t.path]=s},null,8,["value","onUpdate:value"]))]),_:2},1032,["path","label","span","rule"]))),128))]),_:1})]),_:1})]),_:1}),o(M,null,{header:l(()=>[u("div",ce,[o(j,{class:"mr-10px",size:"18",component:n(G)},null,8,["component"]),pe])]),default:l(()=>[o(D,null,{default:l(()=>[o(k,{vertical:""},{default:l(()=>[(r(!0),i(f,null,h(n(P),(t,d)=>(r(),_(w,{key:d,"label-placement":"left",label:t.label+":"},{default:l(()=>[o(k,null,{default:l(()=>[(r(!0),i(f,null,h(n(e).memberList[t.value],s=>(r(),_(z,{key:s.userId,closable:""},{default:l(()=>[N(V(s.username),1)]),_:2},1024))),128)),o(A,{size:"small",type:"primary",dashed:"",onClick:s=>L(t)},{default:l(()=>[N(" 添加 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1}),u("pre",null,V(JSON.stringify(n(e),null,2)),1)]),_:1},8,["model"])}}});export{De as _,we as m};
