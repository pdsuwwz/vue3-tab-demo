import{d as g,o as v,b as L,e as p,bo as N,bp as S,aC as f,f as V,g as m,k as T,r as B,c as I,w as i,i as s,h as n,j as M,m as z,p as _,N as D,bV as F,af as h}from"./index-wmytKs51.js";import{m as k,_ as A}from"./CreateProjectForm.vue_vue_type_script_setup_true_lang-B4vjTnFC.js";import{I as E}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-D8gbVLaA.js";import{_ as G}from"./Input-za5-27vT.js";import{_ as U}from"./index-Dp6QIMT2.js";import"./index-6mgrdM6T.js";import"./utils-cs3zlljL.js";import"./FocusDetector-DcTy2WDU.js";import"./create-D3Vn69pI.js";import"./Eye-KAZ8vJSw.js";import"./Tag-BiotZny4.js";import"./index-C1_EhUER.js";import"./member-avatar-DVoK-9KR.js";import"./DatePicker-DvBeMj1i.js";import"./Dropdown-dJvvwr3w.js";import"./Forward-Bw5qSXec.js";import"./TeamOutlined-CiBVMXVN.js";import"./FormItem-DD765s_P.js";import"./FormItemGridItem-MlQE6yRf.js";import"./Grid-BIPVQlwh.js";import"./ListItem-CaSYQSZX.js";import"./MemberAvatar.vue_vue_type_script_setup_true_lang-p5CF3s4N.js";import"./Avatar-DWklVXea.js";import"./Tooltip-CGotClcb.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},W=p("path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z",fill:"currentColor"},null,-1),q=[W],J=g({name:"Add",render:function(t,c){return v(),L("svg",O,q)}}),K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=p("path",{d:"M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1l111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6c8.2 0 16.3-2.1 23.6-6.2c12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6L48 288L464 48l-59.4 387.3z",fill:"currentColor"},null,-1),X=[Q],Y=g({name:"PaperPlaneRegular",render:function(t,c){return v(),L("svg",K,X)}});function Z(e){return N({url:"/project",method:"post",data:e})}const ee=S("HomeFront",{state:()=>({homeProjectList:[]}),getters:{},actions:{async createProject(e){await f(200);const t=await Z(e);return this.filterResponse(t)},async fetchHomeProjectList(){await f(320);const e={msg:"ok",error:0,data:k};return this.filterResponse(e,({data:t})=>{this.homeProjectList=t})},fetchSearchHomeProjectList(e=""){const t={msg:"ok",error:0,data:k};return this.filterResponse(t,({data:c})=>{this.homeProjectList=c.filter(w=>{const{projectName:l}=w;return e.includes(l)||l.includes(e)})})}},debounce:{fetchSearchHomeProjectList:400}}),te=p("h3",null,"项目列表",-1),oe={class:"w-320px"},He=g({name:"GroupProjectList",__name:"index",setup(e){const t=ee(),c=V();m([]);const l=[{title:"项目代码",key:"project_code",align:"center"},{title:"项目名称",key:"projectName",align:"center",render(o){return _(h,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>x(o)},{default:()=>o.projectName})}},{title:"状态",key:"status",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"创建人",key:"create_by",align:"center"},{title:"操作",key:"action",align:"center",render(o){return _(h,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>x(o)},{default:()=>"查看"})}}],x=o=>{c.push({name:"GroupProjectDetail",params:{projectId:o.id}})},u=m(!0);(async()=>{u.value=!0,await t.fetchHomeProjectList(),u.value=!1})();const d=m(""),y=T(()=>t.homeProjectList),C=t.fetchSearchHomeProjectList,b=()=>{const o="新建",a=m(),r=window.$ModalDialog.create({title:"新建项目",style:{maxWidth:"900px",width:"80%"},maskClosable:!1,closeOnEsc:!1,content:()=>_(A,{ref:a}),positiveText:o,async onPositiveClick(){return await a.value.validateRules()&&(r.loading=!0,r.positiveText="提交中..",await f(1e3),r.positiveText=o,r.loading=!1),Promise.reject()}})};return(o,a)=>{const r=D,j=G,H=U,R=B("MyFooter"),$=F;return v(),I($,{"flex-content":""},{title:i(()=>[s(r,{size:22,class:"flex items-center"},{default:i(()=>[s(n(Y))]),_:1}),te]),action:i(()=>[p("div",oe,[s(j,{value:n(d),"onUpdate:value":[a[0]||(a[0]=P=>M(d)?d.value=P:null),n(C)],placeholder:"请输入项目名称搜索",clearable:""},{prefix:i(()=>[s(r,{component:n(E)},null,8,["component"])]),_:1},8,["value","onUpdate:value"])]),s(n(h),{type:"primary",onClick:a[1]||(a[1]=P=>b())},{icon:i(()=>[s(r,{component:n(J)},null,8,["component"])]),default:i(()=>[z(" 添加项目 ")]),_:1})]),default:i(()=>[s(H,{columns:n(l),data:n(y),style:{height:"100%"},striped:"","flex-height":"",loading:n(u),bordered:!1},null,8,["columns","data","loading"]),s(R,{"show-border":""})]),_:1})}}});export{He as default};
