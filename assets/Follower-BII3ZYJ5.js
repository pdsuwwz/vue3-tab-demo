import{bd as E,be as V,bf as $e,bg as ze,bh as Ae,bi as Be,bj as Oe,bk as z,bl as ue,bm as T,S as q,aD as I,aN as Se,E as de,K as x,f as j,a2 as K,a6 as C,R as L,bn as Ce,bo as je,bp as Ee,d as U,V as Ve,T as Ie,bq as Xe,al as pe,br as R,bs as Ye,bt as Ne,I as B,A as N,aj as ke,n as k,bu as Pe,bv as De,a1 as Te}from"./index-BQQ2VPbK.js";import{b as Ke}from"./next-frame-once-C5Ksf8W7.js";var W=E(V,"WeakMap"),Le=$e(Object.keys,Object),We=Object.prototype,_e=We.hasOwnProperty;function Fe(n){if(!ze(n))return Le(n);var e=[];for(var t in Object(n))_e.call(n,t)&&t!="constructor"&&e.push(t);return e}function Ge(n){return Ae(n)?Be(n):Fe(n)}function qe(n,e){for(var t=-1,r=e.length,l=n.length;++t<r;)n[l+t]=e[t];return n}function Ue(n,e){for(var t=-1,r=n==null?0:n.length,l=0,p=[];++t<r;){var u=n[t];e(u,t,n)&&(p[l++]=u)}return p}function He(){return[]}var Je=Object.prototype,Qe=Je.propertyIsEnumerable,ee=Object.getOwnPropertySymbols,Ze=ee?function(n){return n==null?[]:(n=Object(n),Ue(ee(n),function(e){return Qe.call(n,e)}))}:He;function Re(n,e,t){var r=e(n);return Oe(n)?r:qe(r,t(n))}function Mt(n){return Re(n,Ge,Ze)}var _=E(V,"DataView"),F=E(V,"Promise"),G=E(V,"Set"),te="[object Map]",et="[object Object]",ne="[object Promise]",re="[object Set]",oe="[object WeakMap]",ie="[object DataView]",tt=z(_),nt=z(T),rt=z(F),ot=z(G),it=z(W),g=ue;(_&&g(new _(new ArrayBuffer(1)))!=ie||T&&g(new T)!=te||F&&g(F.resolve())!=ne||G&&g(new G)!=re||W&&g(new W)!=oe)&&(g=function(n){var e=ue(n),t=e==et?n.constructor:void 0,r=t?z(t):"";if(r)switch(r){case tt:return ie;case nt:return te;case rt:return ne;case ot:return re;case it:return oe}return e});let $,A;const lt=()=>{var n,e;$=Se?(e=(n=document)===null||n===void 0?void 0:n.fonts)===null||e===void 0?void 0:e.ready:void 0,A=!1,$!==void 0?$.then(()=>{A=!0}):A=!0};lt();function st(n){if(A)return;let e=!1;q(()=>{A||$==null||$.then(()=>{e||n()})}),I(()=>{e=!0})}const gt=de("n-internal-select-menu"),at=de("n-internal-select-menu-body"),fe="__disabled__";function he(n){const e=x(Ce,null),t=x(je,null),r=x(Ee,null),l=x(at,null),p=j();if(typeof document<"u"){p.value=document.fullscreenElement;const u=()=>{p.value=document.fullscreenElement};q(()=>{K("fullscreenchange",document,u)}),I(()=>{C("fullscreenchange",document,u)})}return L(()=>{var u;const{to:h}=n;return h!==void 0?h===!1?fe:h===!0?p.value||"body":h:e!=null&&e.value?(u=e.value.$el)!==null&&u!==void 0?u:e.value:t!=null&&t.value?t.value:r!=null&&r.value?r.value:l!=null&&l.value?l.value:h??(p.value||"body")})}he.tdkey=fe;he.propTo={type:[String,Object,Boolean],default:void 0};let y=null;function me(){if(y===null&&(y=document.getElementById("v-binder-view-measurer"),y===null)){y=document.createElement("div"),y.id="v-binder-view-measurer";const{style:n}=y;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(y)}return y.getBoundingClientRect()}function ut(n,e){const t=me();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function P(n){const e=n.getBoundingClientRect(),t=me();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function dt(n){return n.nodeType===9?null:n.parentNode}function be(n){if(n===null)return null;const e=dt(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:l}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+l+r))return e}return be(e)}const $t=U({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Ve("VBinder",(e=Ie())===null||e===void 0?void 0:e.proxy);const t=x("VBinder",null),r=j(null),l=i=>{r.value=i,t&&n.syncTargetWithParent&&t.setTargetRef(i)};let p=[];const u=()=>{let i=r.value;for(;i=be(i),i!==null;)p.push(i);for(const c of p)K("scroll",c,v,!0)},h=()=>{for(const i of p)C("scroll",i,v,!0);p=[]},s=new Set,b=i=>{s.size===0&&u(),s.has(i)||s.add(i)},w=i=>{s.has(i)&&s.delete(i),s.size===0&&h()},v=()=>{Ke(o)},o=()=>{s.forEach(i=>i())},a=new Set,f=i=>{a.size===0&&K("resize",window,m),a.has(i)||a.add(i)},d=i=>{a.has(i)&&a.delete(i),a.size===0&&C("resize",window,m)},m=()=>{a.forEach(i=>i())};return I(()=>{C("resize",window,m),h()}),{targetRef:r,setTargetRef:l,addScrollListener:b,removeScrollListener:w,addResizeListener:f,removeResizeListener:d}},render(){return Xe("binder",this.$slots)}}),zt=U({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=x("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?pe(R("follower",this.$slots),[[e]]):R("follower",this.$slots)}}),{c:O}=Ye(),pt="vueuc-style",S={top:"bottom",bottom:"top",left:"right",right:"left"},le={start:"end",center:"center",end:"start"},D={top:"height",bottom:"height",left:"width",right:"width"},ft={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},ht={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},mt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},se={top:!0,bottom:!1,left:!0,right:!1},ae={top:"end",bottom:"start",left:"end",right:"start"};function bt(n,e,t,r,l,p){if(!l||p)return{placement:n,top:0,left:0};const[u,h]=n.split("-");let s=h??"center",b={top:0,left:0};const w=(a,f,d)=>{let m=0,i=0;const c=t[a]-e[f]-e[a];return c>0&&r&&(d?i=se[f]?c:-c:m=se[f]?c:-c),{left:m,top:i}},v=u==="left"||u==="right";if(s!=="center"){const a=mt[n],f=S[a],d=D[a];if(t[d]>e[d]){if(e[a]+e[d]<t[d]){const m=(t[d]-e[d])/2;e[a]<m||e[f]<m?e[a]<e[f]?(s=le[h],b=w(d,f,v)):b=w(d,a,v):s="center"}}else t[d]<e[d]&&e[f]<0&&e[a]>e[f]&&(s=le[h])}else{const a=u==="bottom"||u==="top"?"left":"top",f=S[a],d=D[a],m=(t[d]-e[d])/2;(e[a]<m||e[f]<m)&&(e[a]>e[f]?(s=ae[a],b=w(d,a,v)):(s=ae[f],b=w(d,f,v)))}let o=u;return e[u]<t[D[u]]&&e[u]<e[S[u]]&&(o=S[u]),{placement:s!=="center"?`${o}-${s}`:o,left:b.left,top:b.top}}function ct(n,e){return e?ht[n]:ft[n]}function vt(n,e,t,r,l,p){if(p)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+l)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+l)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+l)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+l)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+l)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+l)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+l)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+l)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+l)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+l)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+l)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+l)}px`,transform:"translateX(-50%)"}}}const wt=O([O(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),O(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[O("> *",{pointerEvents:"all"})])]),At=U({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=x("VBinder"),t=L(()=>n.enabled!==void 0?n.enabled:n.show),r=j(null),l=j(null),p=()=>{const{syncTrigger:o}=n;o.includes("scroll")&&e.addScrollListener(s),o.includes("resize")&&e.addResizeListener(s)},u=()=>{e.removeScrollListener(s),e.removeResizeListener(s)};q(()=>{t.value&&(s(),p())});const h=Ne();wt.mount({id:"vueuc/binder",head:!0,anchorMetaName:pt,ssr:h}),I(()=>{u()}),st(()=>{t.value&&s()});const s=()=>{if(!t.value)return;const o=r.value;if(o===null)return;const a=e.targetRef,{x:f,y:d,overlap:m}=n,i=f!==void 0&&d!==void 0?ut(f,d):P(a);o.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),o.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:c,minWidth:X,placement:H,internalShift:ce,flip:ve}=n;o.setAttribute("v-placement",H),m?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:M}=o;c==="target"?M.width=`${i.width}px`:c!==void 0?M.width=c:M.width="",X==="target"?M.minWidth=`${i.width}px`:X!==void 0?M.minWidth=X:M.minWidth="";const we=P(o),ye=P(l.value),{left:J,top:Q,placement:Y}=bt(H,i,we,ce,ve,m),Z=ct(Y,m),{left:xe,top:Me,transform:ge}=vt(Y,ye,i,Q,J,m);o.setAttribute("v-placement",Y),o.style.setProperty("--v-offset-left",`${Math.round(J)}px`),o.style.setProperty("--v-offset-top",`${Math.round(Q)}px`),o.style.transform=`translateX(${xe}) translateY(${Me}) ${ge}`,o.style.setProperty("--v-transform-origin",Z),o.style.transformOrigin=Z};B(t,o=>{o?(p(),b()):u()});const b=()=>{Te().then(s).catch(o=>{})};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(o=>{B(N(n,o),s)}),["teleportDisabled"].forEach(o=>{B(N(n,o),b)}),B(N(n,"syncTrigger"),o=>{o.includes("resize")?e.addResizeListener(s):e.removeResizeListener(s),o.includes("scroll")?e.addScrollListener(s):e.removeScrollListener(s)});const w=ke(),v=L(()=>{const{to:o}=n;if(o!==void 0)return o;w.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:l,followerRef:r,mergedTo:v,syncPosition:s}},render(){return k(De,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=k("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[k("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?pe(t,[[Pe,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});export{$t as B,zt as V,At as a,at as b,pt as c,O as d,g as e,qe as f,Mt as g,Ze as h,gt as i,Re as j,Ge as k,He as s,he as u};
