import{_ as L}from"./MemberAvatar.vue_vue_type_script_setup_true_lang-DLeSjySZ.js";import{u as U,_ as j}from"./index-DuoXEI0P.js";import{d as b,o as p,b as y,e as u,g as d,at as D,c as $,w as c,a3 as F,i as s,h as o,j as M,t as E,l as q,F as G,n as H,ad as J}from"./index-iLhBIVOw.js";import{_ as O,a as P}from"./Grid-CGc4nnwZ.js";import{_ as Q,a as W}from"./ListItem-D6_c7LGZ.js";import{N as X}from"./Icon-DlsP5A4N.js";import{_ as Y}from"./Input-Bi7uzRAE.js";import{_ as Z}from"./Space-Dkx8_PhH.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ne=u("path",{d:"M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z",fill:"currentColor"},null,-1),te=[ne],se=b({name:"Close",render:function(v,h){return p(),y("svg",ee,te)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},le=u("path",{d:"M29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29zM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9z",fill:"currentColor"},null,-1),ae=[le],re=b({name:"Search",render:function(v,h){return p(),y("svg",oe,ae)}}),ce={class:"flex-1 overflow-y-auto"},ie={class:"flex items-center pl-10px h-34px"},ue={class:"flex-1 overflow-y-auto"},ye=b({name:"MemberAssignCard",__name:"MemberAssignCard",props:{modelValue:{type:Array,default(){return[]}}},setup(f,{expose:v}){const h=U(),k=f.modelValue.slice(),a=d([]),r=d([]);(()=>{F(()=>{a.value=k.map(e=>e.userId),r.value=k})})();const T=e=>e.userId,S=(e,n,t)=>{const i=t.action==="check",m=t.row;if(i)r.value.push(m);else{const _=r.value.findIndex(w=>w.userId===m.userId);_>-1&&r.value.splice(_,1)}},B=e=>{const n=r.value.findIndex(i=>e.userId===i.userId),t=a.value.findIndex(i=>e.userId===i);n<0||t<0||(r.value.splice(n,1),a.value.splice(t,1))},R=[{type:"selection"},{key:"member",render(e){return H(L,{avatar:e.avatar,title:e.username,subTitle:e.userId})}}],x=d(!0),C=d([]),I=async(e={username:""})=>{x.value=!0;const{error:n,data:t}=await h.fetchAllMemberTeamList(e);x.value=!1,!n&&(C.value=t)};I();const g=d(""),z=D(e=>{I({username:e})},200);return v({checkedRowsRef:r}),(e,n)=>{const t=X,i=Y,m=j,_=P,w=J,V=Z,A=Q,K=W,N=O;return p(),$(N,{cols:"2","x-gap":10,"item-responsive":"",responsive:"screen",class:"member-assign-card-box h-500px overflow-hidden"},{default:c(()=>[s(_,{span:"1",class:"flex flex-col min-h-0"},{default:c(()=>[s(i,{value:o(g),"onUpdate:value":[n[0]||(n[0]=l=>M(g)?g.value=l:null),o(z)],placeholder:"输入成员名称，模拟远程搜索",clearable:""},{prefix:c(()=>[s(t,{component:o(re)},null,8,["component"])]),_:1},8,["value","onUpdate:value"]),n[2]||(n[2]=u("div",{class:"py-10px"},null,-1)),u("div",ce,[s(m,{"checked-row-keys":o(a),"onUpdate:checkedRowKeys":[n[1]||(n[1]=l=>M(a)?a.value=l:null),S],style:{height:"100%"},"flex-height":"",bordered:!0,"single-line":!1,size:"small",columns:R,data:o(C),loading:o(x),"row-key":T},null,8,["checked-row-keys","data","loading"])])]),_:1}),s(_,{span:"1",class:"flex flex-col min-h-0"},{default:c(()=>[u("div",ie,E(o(a).length?`已选择${o(a).length}个成员`:"请选择要添加的成员"),1),n[3]||(n[3]=u("div",{class:"py-10px"},null,-1)),u("div",ue,[s(K,{hoverable:"","show-divider":!1},{default:c(()=>[(p(!0),y(G,null,q(o(r),l=>(p(),$(A,{key:l.userId},{default:c(()=>[s(V,{justify:"space-between",align:"center"},{default:c(()=>[s(L,{size:26,avatar:l.avatar,title:l.username,"sub-title":l.userId},null,8,["avatar","title","sub-title"]),s(w,{text:"",onClick:pe=>B(l)},{default:c(()=>[s(t,{size:"20",component:o(se)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})}}});export{re as I,ye as _};
