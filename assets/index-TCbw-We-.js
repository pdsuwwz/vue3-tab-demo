import{_ as S}from"./LayoutSection-CoodITJI.js";import{_ as B}from"./index-BH-5DG9N.js";import{m as P,_ as T}from"./CreateProjectForm.vue_vue_type_script_setup_true_lang-Pw0SyYHV.js";import{d as w,b as k,o as v,e as p,bb as V,bc as I,as as g,f as m,k as $,c as z,w as c,j as D,g as a,u as i,i as E,ac as _,m as F,n as h}from"./index-Dr4_a72h.js";import{I as M}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-DVrvy5xt.js";import{_ as A}from"./index-BXGGqpXc.js";import{_ as G}from"./Input-LioKrBBj.js";import{N as U}from"./Icon-CNNNq4Jw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Space-BaisQgXY.js";import"./get-slot-Bk_rJcZu.js";import"./Octocat-C2MrXMo2.js";import"./index-DybE-4cO.js";import"./utils-DrH5_ubE.js";import"./FocusDetector-DZm3z5N2.js";import"./Follower-RfDnNUhg.js";import"./next-frame-once-C5Ksf8W7.js";import"./Eye-QwoqVdpH.js";import"./create-D3Vn69pI.js";import"./Tag-D4Y5K5ek.js";import"./index-DWnOpGyc.js";import"./Popover-BuY15bb9.js";import"./get-DCJZEGYX.js";import"./use-compitable-BlQ8ajn3.js";import"./member-avatar-CR9m-KS_.js";import"./DatePicker-CyQB7ab6.js";import"./Dropdown-D6dtzICB.js";import"./Forward-CnvwFDTW.js";import"./TeamOutlined-Bt73YKFM.js";import"./FormItem-BfPgMa0X.js";import"./ListItem-COPE6ZA1.js";import"./Grid-DWUDoYbT.js";import"./FormItemGridItem-k1JS1HCD.js";import"./MemberAvatar.vue_vue_type_script_setup_true_lang-WD4JE8Nh.js";import"./Avatar-Bku4dOeq.js";import"./Tooltip-BIp_2ClS.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},W=w({name:"Add",render:function(e,n){return v(),k("svg",O,n[0]||(n[0]=[p("path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z",fill:"currentColor"},null,-1)]))}}),q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},J=w({name:"PaperPlaneRegular",render:function(e,n){return v(),k("svg",q,n[0]||(n[0]=[p("path",{d:"M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1l111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6c8.2 0 16.3-2.1 23.6-6.2c12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6L48 288L464 48l-59.4 387.3z",fill:"currentColor"},null,-1)]))}});function K(t){return V({url:"/project",method:"post",data:t})}const Q=I("HomeFront",{state:()=>({homeProjectList:[]}),getters:{},actions:{async createProject(t){await g(200);const e=await K(t);return this.filterResponse(e)},async fetchHomeProjectList(){await g(320);const t={msg:"ok",error:0,data:P};return this.filterResponse(t,({data:e})=>{this.homeProjectList=e})},fetchSearchHomeProjectList(t=""){const e={msg:"ok",error:0,data:P};return this.filterResponse(e,({data:n})=>{this.homeProjectList=n.filter(l=>{const{projectName:u}=l;return t.includes(u)||u.includes(t)})})}},debounce:{fetchSearchHomeProjectList:400}}),X={class:"w-320px"},It=w({name:"GroupProjectList",__name:"index",setup(t){const e=Q(),n=D(),l=r=>{n.push({name:"GroupProjectDetail",params:{projectId:r.id}})};m([]);const L=[{title:"项目代码",key:"project_code",align:"center"},{title:"项目名称",key:"projectName",align:"center",render(r){return h(_,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(r)},{default:()=>r.projectName})}},{title:"状态",key:"status",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"创建人",key:"create_by",align:"center"},{title:"操作",key:"action",align:"center",render(r){return h(_,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(r)},{default:()=>"查看"})}}],d=m(!0);(async()=>{d.value=!0,await e.fetchHomeProjectList(),d.value=!1})();const f=m(""),y=$(()=>e.homeProjectList),b=e.fetchSearchHomeProjectList,C=()=>{const r="新建",o=m(),s=window.$ModalDialog.create({title:"新建项目",style:{maxWidth:"900px",width:"80%"},maskClosable:!1,closeOnEsc:!1,content:()=>h(T,{ref:o}),positiveText:r,async onPositiveClick(){return await o.value.validateRules()?(s.loading=!0,s.positiveText="提交中..",await g(1e3),s.positiveText=r,s.loading=!1,Promise.reject(new Error("提交失败"))):Promise.reject(new Error("请填写完整"))}})};return(r,o)=>{const s=U,x=G,H=A,R=B,N=S;return v(),z(N,{"flex-content":""},{title:c(()=>[a(s,{size:22,class:"flex items-center"},{default:c(()=>[a(i(J))]),_:1}),o[2]||(o[2]=p("h3",null,"项目列表",-1))]),action:c(()=>[p("div",X,[a(x,{value:i(f),"onUpdate:value":[o[0]||(o[0]=j=>E(f)?f.value=j:null),i(b)],placeholder:"请输入项目名称搜索",clearable:""},{prefix:c(()=>[a(s,{component:i(M)},null,8,["component"])]),_:1},8,["value","onUpdate:value"])]),a(i(_),{type:"primary",onClick:o[1]||(o[1]=j=>C())},{icon:c(()=>[a(s,{component:i(W)},null,8,["component"])]),default:c(()=>[o[3]||(o[3]=F(" 添加项目 "))]),_:1})]),default:c(()=>[a(H,{columns:i(L),data:i(y),style:{height:"100%"},striped:"","flex-height":"",loading:i(d),bordered:!1},null,8,["columns","data","loading"]),a(R,{"show-border":""})]),_:1})}}});export{It as default};
