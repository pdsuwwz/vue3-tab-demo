import{d as x,k as C,g as u,o as r,c as p,w as l,i as o,h as a,b as I,l as R,a as $,F as E,m as D,c9 as A,e as G,t as J,p as d,aC as L,n as O,af as T}from"./index-C9dlbafH.js";import j from"./AvatarUpload-CSJ_6nXc.js";import{f as q,u as z,N as y,c as H,b as K,a as P,d as Q}from"./index-DOHCC3qY.js";import{_ as W}from"./FormItemGridItem-DCVi5s2v.js";import{a as X,_ as Y}from"./Grid-D1eupOEK.js";import{_ as Z,a as ee}from"./FormItem-BLq_l9W9.js";import{_ as ae}from"./Spin-BsP9qE3w.js";import{_ as te}from"./Input-MXbglm5U.js";const _e=x({name:"MemberEditor",__name:"MemberEditor",props:{title:{type:String,default:""},userId:{type:String,default:""},readonly:{type:Boolean,default:!0}},setup(f){const b=f,m=C(()=>b.readonly),e=u({username:"",roleId:"",userId:"",avatar:"",email:"",rank:"",phone:"",memberStatus:null}),_=u(!0);(async()=>{_.value=!0;const t=await q(b.userId);t&&(e.value=t),_.value=!1})();const k=[{path:"username",label:"成员名称"},{path:"userId",label:"工号"},{path:"roleId",label:"项目角色",render:()=>d(y,{options:z,value:e.value.roleId,onUpdateValue(t){e.value.roleId=t}})},{path:"email",label:"邮箱"},{path:"phone",label:"手机号"},{path:"memberStatus",label:"成员状态",render:()=>d(P,{value:e.value.memberStatus,onUpdateValue(t){e.value.memberStatus=t}},()=>H.map(t=>d(K,{...t})))},{path:"rank",label:"职级",render:()=>d(y,{options:Q,value:e.value.rank,onUpdateValue(t){e.value.rank=t}})}],M=u(),i=u(!1),S=async()=>{i.value=!0,await L(500),i.value=!1,window.$ModalMessage.success("更新成功")};return(t,s)=>{const V=te,w=W,v=X,g=Y,h=Z,N=ee,U=ae,B=O;return r(),p(B,{bordered:!1,title:f.title,class:"bg-transparent"},{default:l(()=>[o(U,{show:a(_)},{default:l(()=>[o(N,{ref_key:"refForm",ref:M,model:a(e),"label-placement":"top","label-width":"auto",disabled:a(m)},{default:l(()=>[o(v,{"x-gap":100,cols:"xs:1 s:1 m:2 l:2",responsive:"screen"},{default:l(()=>[o(g,null,{default:l(()=>[o(v,{cols:"l:1",responsive:"screen"},{default:l(()=>[(r(),I(E,null,R(k,(n,F)=>o(w,{key:F,path:n.path,label:n.label},{default:l(()=>[n.render?(r(),p($(n.render),{key:0,value:a(e)[n.path],"onUpdate:value":c=>a(e)[n.path]=c},null,40,["value","onUpdate:value"])):(r(),p(V,{key:1,value:a(e)[n.path],"onUpdate:value":c=>a(e)[n.path]=c},null,8,["value","onUpdate:value"]))]),_:2},1032,["path","label"])),64))]),_:1})]),_:1}),o(g,null,{default:l(()=>[o(h,{path:"avatar",label:"成员头像"},{default:l(()=>[o(j,{modelValue:a(e).avatar,"onUpdate:modelValue":s[0]||(s[0]=n=>a(e).avatar=n),disabled:a(m)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),a(m)?A("",!0):(r(),p(h,{key:0},{default:l(()=>[o(a(T),{type:"primary",loading:a(i),disabled:"",onClick:s[1]||(s[1]=n=>S())},{default:l(()=>[D(" 更新 ")]),_:1},8,["loading"])]),_:1}))]),_:1},8,["model","disabled"]),G("pre",null,J(JSON.stringify(a(e),null,2)),1)]),_:1},8,["show"])]),_:1},8,["title"])}}});export{_e as _};
