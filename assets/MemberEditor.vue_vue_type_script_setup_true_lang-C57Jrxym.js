import{d as x,k as I,f as u,c as p,w as l,_ as C,o as r,g as o,u as a,e as R,cb as $,b as E,F as D,l as A,n as d,a as G,ac as J,m as L,t as O,as as T}from"./index-Dr4_a72h.js";import j from"./AvatarUpload-Cxbddtwn.js";import{f as q,u as z,N as y,c as H,a as K,b as P,d as Q}from"./index-DybE-4cO.js";import{_ as W}from"./Spin-CzZdO-v3.js";import{_ as X,a as Y}from"./FormItem-BfPgMa0X.js";import{_ as Z,a as ee}from"./Grid-DWUDoYbT.js";import{_ as ae}from"./FormItemGridItem-k1JS1HCD.js";import{_ as te}from"./Input-LioKrBBj.js";const _e=x({name:"MemberEditor",__name:"MemberEditor",props:{title:{type:String,default:""},userId:{type:String,default:""},readonly:{type:Boolean,default:!0}},setup(f){const b=f,m=I(()=>b.readonly),e=u({username:"",roleId:"",userId:"",avatar:"",email:"",rank:"",phone:"",memberStatus:null}),_=u(!0);(async()=>{_.value=!0;const t=await q(b.userId);t&&(e.value=t),_.value=!1})();const k=[{path:"username",label:"成员名称"},{path:"userId",label:"工号"},{path:"roleId",label:"项目角色",render:()=>d(y,{options:z,value:e.value.roleId,onUpdateValue(t){e.value.roleId=t}})},{path:"email",label:"邮箱"},{path:"phone",label:"手机号"},{path:"memberStatus",label:"成员状态",render:()=>d(P,{value:e.value.memberStatus,onUpdateValue(t){e.value.memberStatus=t}},()=>H.map(t=>d(K,{...t})))},{path:"rank",label:"职级",render:()=>d(y,{options:Q,value:e.value.rank,onUpdateValue(t){e.value.rank=t}})}],M=u(),i=u(!1),S=async()=>{i.value=!0,await T(500),i.value=!1,window.$ModalMessage.success("更新成功")};return(t,s)=>{const V=te,w=ae,v=Z,g=ee,h=Y,N=X,U=W,B=C;return r(),p(B,{bordered:!1,title:f.title,class:"bg-transparent"},{default:l(()=>[o(U,{show:a(_)},{default:l(()=>[o(N,{ref_key:"refForm",ref:M,model:a(e),"label-placement":"top","label-width":"auto",disabled:a(m)},{default:l(()=>[o(v,{"x-gap":100,cols:"xs:1 s:1 m:2 l:2",responsive:"screen"},{default:l(()=>[o(g,null,{default:l(()=>[o(v,{cols:"l:1",responsive:"screen"},{default:l(()=>[(r(),E(D,null,A(k,(n,F)=>o(w,{key:F,path:n.path,label:n.label},{default:l(()=>[n.render?(r(),p(G(n.render),{key:0,value:a(e)[n.path],"onUpdate:value":c=>a(e)[n.path]=c},null,40,["value","onUpdate:value"])):(r(),p(V,{key:1,value:a(e)[n.path],"onUpdate:value":c=>a(e)[n.path]=c},null,8,["value","onUpdate:value"]))]),_:2},1032,["path","label"])),64))]),_:1})]),_:1}),o(g,null,{default:l(()=>[o(h,{path:"avatar",label:"成员头像"},{default:l(()=>[o(j,{modelValue:a(e).avatar,"onUpdate:modelValue":s[0]||(s[0]=n=>a(e).avatar=n),disabled:a(m)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),a(m)?$("",!0):(r(),p(h,{key:0},{default:l(()=>[o(a(J),{type:"primary",loading:a(i),disabled:"",onClick:s[1]||(s[1]=n=>S())},{default:l(()=>s[2]||(s[2]=[L(" 更新 ")])),_:1},8,["loading"])]),_:1}))]),_:1},8,["model","disabled"]),R("pre",null,O(JSON.stringify(a(e),null,2)),1)]),_:1},8,["show"])]),_:1},8,["title"])}}});export{_e as _};
