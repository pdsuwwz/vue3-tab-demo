import{d as w,o as v,b as k,e as p,bo as N,bp as S,aC as g,f as V,g as m,k as T,r as B,c as I,w as i,i as s,h as n,j as M,m as z,p as h,N as D,bV as F,af as f}from"./index-BAl-k0dT.js";import{m as P,_ as E}from"./CreateProjectForm.vue_vue_type_script_setup_true_lang-DBWZPo8x.js";import{I as A}from"./MemberAssignCard.vue_vue_type_style_index_0_lang-Bx4T1-sa.js";import{_ as G}from"./Input-BVYP8yvV.js";import{_ as U}from"./index-Bo4UNRqJ.js";import"./index-9ADP5Hth.js";import"./utils-DomGFvNZ.js";import"./FocusDetector-CbyWdMah.js";import"./create-D3Vn69pI.js";import"./Eye-DYFllyR9.js";import"./Tag-B1pbqv_O.js";import"./index-vEhKleZY.js";import"./member-avatar-DVoK-9KR.js";import"./DatePicker-BV9h2cVk.js";import"./Dropdown-ydP3Z0wZ.js";import"./Forward-CD35-mAM.js";import"./TeamOutlined-BsQt1PvC.js";import"./FormItem-BPu9FKZt.js";import"./FormItemGridItem-WkuiNAv4.js";import"./Grid-CrSGUsE0.js";import"./ListItem-C7IYhJYe.js";import"./MemberAvatar.vue_vue_type_script_setup_true_lang-yxy8_0ZQ.js";import"./Avatar-HcNptBGy.js";import"./Tooltip-D-AMcySY.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},W=p("path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z",fill:"currentColor"},null,-1),q=[W],J=w({name:"Add",render:function(t,c){return v(),k("svg",O,q)}}),K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=p("path",{d:"M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1l111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6c8.2 0 16.3-2.1 23.6-6.2c12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6L48 288L464 48l-59.4 387.3z",fill:"currentColor"},null,-1),X=[Q],Y=w({name:"PaperPlaneRegular",render:function(t,c){return v(),k("svg",K,X)}});function Z(e){return N({url:"/project",method:"post",data:e})}const ee=S("HomeFront",{state:()=>({homeProjectList:[]}),getters:{},actions:{async createProject(e){await g(200);const t=await Z(e);return this.filterResponse(t)},async fetchHomeProjectList(){await g(320);const e={msg:"ok",error:0,data:P};return this.filterResponse(e,({data:t})=>{this.homeProjectList=t})},fetchSearchHomeProjectList(e=""){const t={msg:"ok",error:0,data:P};return this.filterResponse(t,({data:c})=>{this.homeProjectList=c.filter(l=>{const{projectName:u}=l;return e.includes(u)||u.includes(e)})})}},debounce:{fetchSearchHomeProjectList:400}}),te=p("h3",null,"项目列表",-1),oe={class:"w-320px"},He=w({name:"GroupProjectList",__name:"index",setup(e){const t=ee(),c=V(),l=o=>{c.push({name:"GroupProjectDetail",params:{projectId:o.id}})};m([]);const L=[{title:"项目代码",key:"project_code",align:"center"},{title:"项目名称",key:"projectName",align:"center",render(o){return h(f,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(o)},{default:()=>o.projectName})}},{title:"状态",key:"status",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"创建人",key:"create_by",align:"center"},{title:"操作",key:"action",align:"center",render(o){return h(f,{text:!0,tag:"a",type:"info",strong:!0,onClick:()=>l(o)},{default:()=>"查看"})}}],d=m(!0);(async()=>{d.value=!0,await t.fetchHomeProjectList(),d.value=!1})();const _=m(""),y=T(()=>t.homeProjectList),C=t.fetchSearchHomeProjectList,b=()=>{const o="新建",a=m(),r=window.$ModalDialog.create({title:"新建项目",style:{maxWidth:"900px",width:"80%"},maskClosable:!1,closeOnEsc:!1,content:()=>h(E,{ref:a}),positiveText:o,async onPositiveClick(){return await a.value.validateRules()?(r.loading=!0,r.positiveText="提交中..",await g(1e3),r.positiveText=o,r.loading=!1,Promise.reject(new Error("提交失败"))):Promise.reject(new Error("请填写完整"))}})};return(o,a)=>{const r=D,x=G,H=U,R=B("MyFooter"),$=F;return v(),I($,{"flex-content":""},{title:i(()=>[s(r,{size:22,class:"flex items-center"},{default:i(()=>[s(n(Y))]),_:1}),te]),action:i(()=>[p("div",oe,[s(x,{value:n(_),"onUpdate:value":[a[0]||(a[0]=j=>M(_)?_.value=j:null),n(C)],placeholder:"请输入项目名称搜索",clearable:""},{prefix:i(()=>[s(r,{component:n(A)},null,8,["component"])]),_:1},8,["value","onUpdate:value"])]),s(n(f),{type:"primary",onClick:a[1]||(a[1]=j=>b())},{icon:i(()=>[s(r,{component:n(J)},null,8,["component"])]),default:i(()=>[z(" 添加项目 ")]),_:1})]),default:i(()=>[s(H,{columns:n(L),data:n(y),style:{height:"100%"},striped:"","flex-height":"",loading:n(d),bordered:!1},null,8,["columns","data","loading"]),s(R,{"show-border":""})]),_:1})}}});export{He as default};
