import{_ as L}from"./MemberAvatar.vue_vue_type_script_setup_true_lang-qQArIMR9.js";import{u as U,_ as j}from"./index-Bg27ijCJ.js";import{d as b,o as p,b as y,e as _,g as d,at as D,c as $,w as c,a3 as F,i as s,h as o,j as M,t as E,l as q,F as G,n as H,ad as J}from"./index-DMvxVjEm.js";import{_ as O,a as P}from"./Grid-DUxlH05E.js";import{_ as Q,a as W}from"./ListItem-B78e2BE-.js";import{N as X}from"./Icon-rGyCv9MX.js";import{_ as Y}from"./Input-B_y52Yu1.js";import{_ as Z}from"./Space-CpU1MZ6E.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ne=_("path",{d:"M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z",fill:"currentColor"},null,-1),te=[ne],se=b({name:"Close",render:function(h,v){return p(),y("svg",ee,te)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ae=_("path",{d:"M29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29zM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9z",fill:"currentColor"},null,-1),le=[ae],re=b({name:"Search",render:function(h,v){return p(),y("svg",oe,le)}}),ce=_("div",{class:"py-10px"},null,-1),ie={class:"flex-1 overflow-y-auto"},_e={class:"flex items-center pl-10px h-34px"},ue=_("div",{class:"py-10px"},null,-1),de={class:"flex-1 overflow-y-auto"},Ce=b({name:"MemberAssignCard",__name:"MemberAssignCard",props:{modelValue:{type:Array,default(){return[]}}},setup(f,{expose:h}){const v=U(),k=f.modelValue.slice(),l=d([]),r=d([]);(()=>{F(()=>{l.value=k.map(e=>e.userId),r.value=k})})();const T=e=>e.userId,S=(e,n,t)=>{const i=t.action==="check",m=t.row;if(i)r.value.push(m);else{const u=r.value.findIndex(w=>w.userId===m.userId);u>-1&&r.value.splice(u,1)}},B=e=>{const n=r.value.findIndex(i=>e.userId===i.userId),t=l.value.findIndex(i=>e.userId===i);n<0||t<0||(r.value.splice(n,1),l.value.splice(t,1))},R=[{type:"selection"},{key:"member",render(e){return H(L,{avatar:e.avatar,title:e.username,subTitle:e.userId})}}],x=d(!0),C=d([]),I=async(e={username:""})=>{x.value=!0;const{error:n,data:t}=await v.fetchAllMemberTeamList(e);x.value=!1,!n&&(C.value=t)};I();const g=d(""),z=D(e=>{I({username:e})},200);return h({checkedRowsRef:r}),(e,n)=>{const t=X,i=Y,m=j,u=P,w=J,V=Z,A=Q,K=W,N=O;return p(),$(N,{cols:"2","x-gap":10,"item-responsive":"",responsive:"screen",class:"member-assign-card-box h-500px overflow-hidden"},{default:c(()=>[s(u,{span:"1",class:"flex flex-col min-h-0"},{default:c(()=>[s(i,{value:o(g),"onUpdate:value":[n[0]||(n[0]=a=>M(g)?g.value=a:null),o(z)],placeholder:"输入成员名称，模拟远程搜索",clearable:""},{prefix:c(()=>[s(t,{component:o(re)},null,8,["component"])]),_:1},8,["value","onUpdate:value"]),ce,_("div",ie,[s(m,{"checked-row-keys":o(l),"onUpdate:checkedRowKeys":[n[1]||(n[1]=a=>M(l)?l.value=a:null),S],style:{height:"100%"},"flex-height":"",bordered:!0,"single-line":!1,size:"small",columns:R,data:o(C),loading:o(x),"row-key":T},null,8,["checked-row-keys","data","loading"])])]),_:1}),s(u,{span:"1",class:"flex flex-col min-h-0"},{default:c(()=>[_("div",_e,E(o(l).length?`已选择${o(l).length}个成员`:"请选择要添加的成员"),1),ue,_("div",de,[s(K,{hoverable:"","show-divider":!1},{default:c(()=>[(p(!0),y(G,null,q(o(r),a=>(p(),$(A,{key:a.userId},{default:c(()=>[s(V,{justify:"space-between",align:"center"},{default:c(()=>[s(L,{size:26,avatar:a.avatar,title:a.username,"sub-title":a.userId},null,8,["avatar","title","sub-title"]),s(w,{text:"",onClick:fe=>B(a)},{default:c(()=>[s(t,{size:"20",component:o(se)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})}}});export{re as I,Ce as _};
