import{_ as L}from"./MemberAvatar.vue_vue_type_script_setup_true_lang-CAMU20VJ.js";import{u as U,_ as D}from"./index-OymgaJI6.js";import{d as b,o as p,b as y,e as _,g as d,aD as j,c as $,w as c,i as t,h as o,j as M,t as F,l as E,F as q,a5 as G,p as H,N as J,af as O,ag as P}from"./index-BtdQCspP.js";import{_ as Q,a as W}from"./Grid-C5rhsfld.js";import{_ as X,a as Y}from"./ListItem-BjLoNp1-.js";import{_ as Z}from"./Input-DQ-Uykgv.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ne=_("path",{d:"M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z",fill:"currentColor"},null,-1),se=[ne],te=b({name:"Close",render:function(h,v){return p(),y("svg",ee,se)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ae=_("path",{d:"M29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29zM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9z",fill:"currentColor"},null,-1),le=[ae],re=b({name:"Search",render:function(h,v){return p(),y("svg",oe,le)}}),ce=_("div",{class:"py-10px"},null,-1),ie={class:"flex-1 overflow-y-auto"},_e={class:"flex items-center pl-10px h-34px"},ue=_("div",{class:"py-10px"},null,-1),de={class:"flex-1 overflow-y-auto"},ye=b({name:"MemberAssignCard",__name:"MemberAssignCard",props:{modelValue:{type:Array,default(){return[]}}},setup(f,{expose:h}){const v=U(),k=f.modelValue.slice();(()=>{G(()=>{l.value=k.map(e=>e.userId),r.value=k})})();const T=e=>e.userId,l=d([]),r=d([]),S=(e,n,s)=>{const i=s.action==="check",m=s.row;if(i)r.value.push(m);else{const u=r.value.findIndex(w=>w.userId===m.userId);u>-1&&r.value.splice(u,1)}},R=e=>{const n=r.value.findIndex(i=>e.userId===i.userId),s=l.value.findIndex(i=>e.userId===i);n<0||s<0||(r.value.splice(n,1),l.value.splice(s,1))},z=[{type:"selection"},{key:"member",render(e){return H(L,{avatar:e.avatar,title:e.username,subTitle:e.userId})}}],x=d(!0),C=d([]),I=async(e={username:""})=>{x.value=!0;const{error:n,data:s}=await v.fetchAllMemberTeamList(e);x.value=!1,!n&&(C.value=s)};I();const g=d(""),B=j(e=>{I({username:e})},200);return h({checkedRowsRef:r}),(e,n)=>{const s=J,i=Z,m=D,u=Q,w=O,V=P,A=X,K=Y,N=W;return p(),$(N,{cols:"2","x-gap":10,"item-responsive":"",responsive:"screen",class:"member-assign-card-box h-500px overflow-hidden"},{default:c(()=>[t(u,{span:"1",class:"flex flex-col min-h-0"},{default:c(()=>[t(i,{value:o(g),"onUpdate:value":[n[0]||(n[0]=a=>M(g)?g.value=a:null),o(B)],placeholder:"输入成员名称，模拟远程搜索",clearable:""},{prefix:c(()=>[t(s,{component:o(re)},null,8,["component"])]),_:1},8,["value","onUpdate:value"]),ce,_("div",ie,[t(m,{"checked-row-keys":o(l),"onUpdate:checkedRowKeys":[n[1]||(n[1]=a=>M(l)?l.value=a:null),S],style:{height:"100%"},"flex-height":"",bordered:!0,"single-line":!1,size:"small",columns:z,data:o(C),loading:o(x),"row-key":T},null,8,["checked-row-keys","data","loading"])])]),_:1}),t(u,{span:"1",class:"flex flex-col min-h-0"},{default:c(()=>[_("div",_e,F(o(l).length?`已选择${o(l).length}个成员`:"请选择要添加的成员"),1),ue,_("div",de,[t(K,{hoverable:"","show-divider":!1},{default:c(()=>[(p(!0),y(q,null,E(o(r),a=>(p(),$(A,{key:a.userId},{default:c(()=>[t(V,{justify:"space-between",align:"center"},{default:c(()=>[t(L,{size:26,avatar:a.avatar,title:a.username,"sub-title":a.userId},null,8,["avatar","title","sub-title"]),t(w,{text:"",onClick:fe=>R(a)},{default:c(()=>[t(s,{size:"20",component:o(te)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})}}});export{re as I,ye as _};
